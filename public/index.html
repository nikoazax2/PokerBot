<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PokerBot Web</title>
    <style>
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
        margin: 24px;
      }
      .card {
        max-width: 720px;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.04);
      }
      label {
        display: block;
        font-weight: 600;
        margin-top: 12px;
      }
      input,
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
      }
      button {
        margin-top: 16px;
        padding: 10px 14px;
        border-radius: 10px;
        border: 0;
        background: #111827;
        color: white;
        cursor: pointer;
      }
      .row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      pre {
        background: #0b1020;
        color: #cbd5e1;
        padding: 12px;
        border-radius: 10px;
        overflow: auto;
      }
    </style>
  </head>
  <body>
    <h1>PokerBot Web</h1>
    <div class="card">
      <form id="f">
        <label>Hand (e.g. <code>kc 4s</code> or <code>13c kc</code>)</label>
        <input name="hand" placeholder="kc 4s" required />

        <label>Community cards (optional, space-separated: <code>2h 7d 9c</code>)</label>
        <input name="community" placeholder="" />

        <div class="row">
          <div>
            <label>Pot</label>
            <input name="pot" type="number" min="0" value="100" />
          </div>
          <div>
            <label>Min bet to call/raise</label>
            <input name="minBet" type="number" min="0" value="10" />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Players (incl. you)</label>
            <input name="numPlayers" type="number" min="2" value="2" />
          </div>
          <div>
            <label>Bankroll</label>
            <input name="bankroll" type="number" min="0" value="500" />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Aggressiveness (0.5 – 1.5)</label>
            <input name="aggressiveness" type="number" step="0.1" min="0.5" max="1.5" value="1" />
          </div>
          <div>
            <label>Bluff frequency (0–1)</label>
            <input name="bluffFrequency" type="number" step="0.05" min="0" max="1" value="0.5" />
          </div>
        </div>

        <label> <input type="checkbox" name="bluffingEnabled" checked /> Enable bluffing </label>

        <button type="submit">Decide</button>
      </form>
    </div>

    <h2>Result</h2>
    <pre id="out">—</pre>

    <script>
      const form = document.getElementById("f");
      const out = document.getElementById("out");
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const fd = new FormData(form);
        const payload = Object.fromEntries(fd.entries());
        payload.pot = Number(payload.pot || 0);
        payload.minBet = Number(payload.minBet || 0);
        payload.numPlayers = Number(payload.numPlayers || 2);
        payload.bankroll = Number(payload.bankroll || 0);
        payload.aggressiveness = Number(payload.aggressiveness || 1);
        payload.bluffFrequency = Number(payload.bluffFrequency || 0);
        payload.bluffingEnabled = fd.get("bluffingEnabled") === "on";

        out.textContent = "Thinking…";
        const res = await fetch("/api/decide", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });
        const data = await res.json();
        out.textContent = JSON.stringify(data, null, 2);
      });
    </script>
  </body>
</html>
